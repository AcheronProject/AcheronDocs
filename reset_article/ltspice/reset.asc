Version 4
SHEET 1 4376 2072
WIRE 928 -1104 912 -1104
WIRE 1024 -1104 1008 -1104
WIRE 928 -912 912 -912
WIRE 1024 -912 1008 -912
WIRE 1264 -912 1248 -912
WIRE 1360 -912 1344 -912
WIRE 928 -704 912 -704
WIRE 1024 -704 1008 -704
WIRE 1264 -704 1248 -704
WIRE 1360 -704 1344 -704
WIRE -16 -304 -48 -304
WIRE 64 -304 48 -304
WIRE 192 -304 144 -304
WIRE 240 -304 192 -304
WIRE 256 -304 240 -304
WIRE 3104 -304 3104 -336
WIRE 1152 -288 1152 -320
WIRE 192 -272 192 -304
WIRE 240 -272 240 -304
WIRE 3104 -224 3104 -240
WIRE 1152 -208 1152 -224
WIRE 192 -176 192 -192
WIRE 240 -176 240 -208
WIRE 2992 -128 2992 -144
WIRE 3104 -128 3104 -144
WIRE 3104 -128 3040 -128
WIRE 3152 -128 3104 -128
WIRE 3200 -128 3152 -128
WIRE 1152 -112 1152 -128
WIRE 1200 -112 1152 -112
WIRE 1328 -112 1200 -112
WIRE 1360 -112 1328 -112
WIRE 3040 -112 3040 -128
WIRE 1328 -96 1328 -112
WIRE 3104 -96 3104 -128
WIRE 3152 -96 3152 -128
WIRE -16 -80 -48 -80
WIRE 64 -80 48 -80
WIRE 192 -80 144 -80
WIRE 240 -80 192 -80
WIRE 256 -80 240 -80
WIRE 1152 -80 1152 -112
WIRE 1200 -80 1200 -112
WIRE 2368 -64 2368 -96
WIRE 192 -48 192 -80
WIRE 240 -48 240 -80
WIRE 2944 -32 2928 -32
WIRE 2992 -32 2992 -48
WIRE 2992 -32 2944 -32
WIRE 1632 -16 1632 -32
WIRE 1328 0 1328 -16
WIRE 3104 0 3104 -16
WIRE 3152 0 3152 -32
WIRE 1152 16 1152 0
WIRE 1200 16 1200 -16
WIRE 2368 16 2368 0
WIRE 2992 16 2992 -32
WIRE 3040 16 3040 -32
WIRE 192 48 192 32
WIRE 240 48 240 16
WIRE 1280 64 1264 64
WIRE 1632 80 1632 64
WIRE 1728 80 1632 80
WIRE 1744 80 1728 80
WIRE 2864 80 2848 80
WIRE 3184 80 3168 80
WIRE 1632 96 1632 80
WIRE 1728 96 1728 80
WIRE 2144 112 2144 96
WIRE 2192 112 2192 96
WIRE 2320 112 2192 112
WIRE 2368 112 2368 96
WIRE 2368 112 2320 112
WIRE 2064 128 2064 96
WIRE 2192 128 2192 112
WIRE -16 144 -48 144
WIRE 64 144 48 144
WIRE 192 144 144 144
WIRE 240 144 192 144
WIRE 256 144 240 144
WIRE 2320 144 2320 112
WIRE 2368 144 2368 112
WIRE 1504 160 1472 160
WIRE 2992 160 2992 144
WIRE 3040 160 3040 144
WIRE 192 176 192 144
WIRE 240 176 240 144
WIRE 1328 176 1328 96
WIRE 1728 192 1728 160
WIRE 2064 208 2064 192
WIRE 2064 208 2048 208
WIRE 2144 208 2144 192
WIRE 2144 208 2064 208
WIRE 2144 224 2144 208
WIRE 2192 224 2192 208
WIRE 2320 240 2320 208
WIRE 2368 240 2368 224
WIRE 1632 256 1632 224
WIRE 192 272 192 256
WIRE 240 272 240 240
WIRE 2048 288 2032 288
WIRE 2272 288 2256 288
WIRE 2384 288 2352 288
WIRE 736 336 688 336
WIRE 688 352 688 336
WIRE 800 352 800 336
WIRE 2976 352 2928 352
WIRE 144 368 144 352
WIRE 736 368 736 336
WIRE 752 368 736 368
WIRE 2928 368 2928 352
WIRE 3040 368 3040 352
WIRE 2144 384 2144 352
WIRE 2192 384 2192 352
WIRE 2976 384 2976 352
WIRE 2992 384 2976 384
WIRE 752 416 736 416
WIRE 2992 432 2976 432
WIRE 688 448 688 432
WIRE 736 448 736 416
WIRE 736 448 688 448
WIRE 800 448 800 432
WIRE 144 464 144 448
WIRE 240 464 144 464
WIRE 256 464 240 464
WIRE 1520 464 1472 464
WIRE 2352 464 2304 464
WIRE 2928 464 2928 448
WIRE 2976 464 2976 432
WIRE 2976 464 2928 464
WIRE 3040 464 3040 448
WIRE 144 480 144 464
WIRE 240 480 240 464
WIRE 1472 480 1472 464
WIRE 1584 480 1584 464
WIRE 2304 480 2304 464
WIRE 2416 480 2416 464
WIRE 1520 496 1520 464
WIRE 1536 496 1520 496
WIRE 2352 496 2352 464
WIRE 2368 496 2352 496
WIRE 16 544 -16 544
WIRE 1536 544 1520 544
WIRE 2368 544 2352 544
WIRE 240 576 240 544
WIRE 1472 576 1472 560
WIRE 1520 576 1520 544
WIRE 1520 576 1472 576
WIRE 1584 576 1584 560
WIRE 2304 576 2304 560
WIRE 2352 576 2352 544
WIRE 2352 576 2304 576
WIRE 2416 576 2416 560
WIRE 144 640 144 608
FLAG -48 -304 PUSH
IOPIN -48 -304 In
FLAG 192 -176 0
FLAG 240 -176 0
FLAG 256 -304 BOOT0_NOMINAL
IOPIN 256 -304 Out
FLAG -48 -80 PUSH
IOPIN -48 -80 In
FLAG 192 48 0
FLAG 240 48 0
FLAG 256 -80 BOOT0_FAST
IOPIN 256 -80 Out
FLAG -48 144 PUSH
IOPIN -48 144 In
FLAG 192 272 0
FLAG 240 272 0
FLAG 256 144 BOOT0_SLOW
IOPIN 256 144 Out
FLAG 912 -704 0
FLAG 1024 -704 BOOT0_HIGH_THRESHOLD
IOPIN 1024 -704 Out
FLAG 912 -912 0
FLAG 1024 -912 BOOT0_LOW_THRESHOLD
IOPIN 1024 -912 Out
FLAG 240 576 0
FLAG 912 -1104 0
FLAG 1024 -1104 3V3
IOPIN 1024 -1104 Out
FLAG 144 352 3V3
IOPIN 144 352 In
FLAG 256 464 nRST
IOPIN 256 464 Out
FLAG 1152 16 0
FLAG 1200 16 0
FLAG 1360 -112 BOOT0_delayed_discharge
IOPIN 1360 -112 Out
FLAG 1264 64 PUSH_JFT
IOPIN 1264 64 In
FLAG 1328 176 0
FLAG 1248 -704 0
FLAG 1360 -704 NRST_HIGH_THRESHOLD
IOPIN 1360 -704 Out
FLAG 1248 -912 0
FLAG 1360 -912 NRST_LOW_THRESHOLD
IOPIN 1360 -912 Out
FLAG 3104 -336 PUSH_MUN
IOPIN 3104 -336 In
FLAG 3104 0 0
FLAG 3152 0 0
FLAG 3200 -128 BOOT0_MUN_discharge
IOPIN 3200 -128 Out
FLAG 3040 160 0
FLAG 2992 -144 3V3
IOPIN 2992 -144 In
FLAG 2992 160 0
FLAG 2944 -96 0
FLAG 2928 -32 nRST_MUN
IOPIN 2928 -32 Out
FLAG 3040 352 PUSH_MUN
IOPIN 3040 352 Out
FLAG 3040 464 3V3
IOPIN 3040 464 Out
FLAG -16 544 PUSH
IOPIN -16 544 In
FLAG 144 640 0
FLAG 2848 80 PUSH_MUN
IOPIN 2848 80 In
FLAG 3184 80 PUSH_MUN
IOPIN 3184 80 In
FLAG 800 336 PUSH
IOPIN 800 336 Out
FLAG 800 448 3V3
IOPIN 800 448 Out
FLAG 1728 192 0
FLAG 1632 -32 3V3
IOPIN 1632 -32 In
FLAG 1744 80 nRST_JFT
IOPIN 1744 80 Out
FLAG 1632 256 0
FLAG 1584 464 PUSH_JFT
IOPIN 1584 464 Out
FLAG 1584 576 3V3
IOPIN 1584 576 Out
FLAG 1152 -320 PUSH_JFT
IOPIN 1152 -320 Out
FLAG 1472 160 PUSH_JFT
IOPIN 1472 160 In
FLAG 2368 240 0
FLAG 2320 240 0
FLAG 2192 96 BOOT0_delayed_discharge_UFM5N
IOPIN 2192 96 Out
FLAG 2064 96 0
FLAG 2144 96 3V3
IOPIN 2144 96 In
FLAG 2048 208 nRST_UFM5N
IOPIN 2048 208 Out
FLAG 2144 384 0
FLAG 2416 464 PUSH_UFM5N
IOPIN 2416 464 Out
FLAG 2416 576 3V3
IOPIN 2416 576 Out
FLAG 2032 288 PUSH_UFM5N
IOPIN 2032 288 In
FLAG 2192 384 0
FLAG 2384 288 PUSH_UFM5N
IOPIN 2384 288 In
FLAG 2368 -96 PUSH_UFM5N
IOPIN 2368 -96 In
SYMBOL diode -16 -288 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 160 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {R1}
SYMBOL res 208 -176 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value {R2}
SYMBOL cap 224 -272 R0
SYMATTR InstName C1
SYMATTR Value {C}
SYMBOL diode -16 -64 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res 160 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {R1*(1+R1TOL)}
SYMBOL res 208 48 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value {R2*(1-R2TOL)}
SYMBOL cap 224 -48 R0
SYMATTR InstName C2
SYMATTR Value {C*(1-CTOL)}
SYMBOL diode -16 160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL res 160 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R1*(1-R1TOL)}
SYMBOL res 208 272 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value {R2*(1+R2TOL)}
SYMBOL cap 224 176 R0
SYMATTR InstName C3
SYMATTR Value {C*(1+CTOL)}
SYMBOL voltage 1024 -704 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value {0.2*3.3+0.95}
SYMBOL voltage 1024 -912 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {0.3*3.3-0.3}
SYMBOL cap 224 480 R0
SYMATTR InstName C5
SYMATTR Value 1n
SYMBOL res 128 352 R0
SYMATTR InstName R13
SYMATTR Value 40k
SYMBOL voltage 1024 -1104 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 3.3
SYMBOL res 1168 -112 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value {R1}
SYMBOL res 1168 16 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value {R2}
SYMBOL cap 1184 -80 R0
SYMATTR InstName C6
SYMATTR Value {C}
SYMBOL res 1312 -112 R0
SYMATTR InstName R18
SYMATTR Value {a+1u}
SYMBOL voltage 1360 -704 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value {0.445*3.3+0.398}
SYMBOL voltage 1360 -912 R90
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value {0.3*3.3+0.07}
SYMBOL diode 1136 -288 R0
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL res 3120 -128 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value {R1}
SYMBOL res 3120 0 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value {R2}
SYMBOL cap 3136 -96 R0
SYMATTR InstName C4
SYMATTR Value {C}
SYMBOL diode 3088 -304 R0
SYMATTR InstName D5
SYMATTR Value 1N4148
SYMBOL res 2976 -144 R0
WINDOW 0 -17 19 Left 2
WINDOW 3 -17 31 Left 2
SYMATTR InstName R12
SYMATTR Value 55k
SYMBOL cap 2960 -32 R180
WINDOW 0 36 39 Left 2
WINDOW 3 36 26 Left 2
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL Acheron\\DTC123JKA 112 544 R0
WINDOW 0 -18 -36 Top 2
WINDOW 3 -18 -51 Top 2
SYMATTR InstName U6
SYMATTR ModelFile C:\users\alvaro\My Documents\LTspiceXVII\lib\sym\Acheron\DTC123JKA.LIB
SYMBOL Acheron\\MUN5335DW1T1G 2960 80 R0
WINDOW 0 189 47 Bottom 2
WINDOW 3 151 49 Top 2
SYMATTR InstName U8
SYMATTR Value MUN5335DW1T1G
SYMATTR ModelFile C:\users\alvaro\My Documents\LTspiceXVII\lib\sym\Acheron\MUN5335DW1.LIB
SYMBOL sw 3040 352 R0
SYMATTR InstName S1
SYMATTR Value IDEAL_SWITCH
SYMBOL voltage 2928 464 R180
WINDOW 0 9 104 Left 2
WINDOW 3 9 93 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 1 1m 1n 1n 4.999s)
SYMBOL sw 800 336 R0
SYMATTR InstName S2
SYMATTR Value IDEAL_SWITCH
SYMBOL voltage 688 448 R180
WINDOW 0 9 104 Left 2
WINDOW 3 9 93 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(0 1 1p 1n 1n 5s)
SYMBOL cap 1712 96 R0
SYMATTR InstName C7
SYMATTR Value 1n
SYMBOL res 1616 -32 R0
SYMATTR InstName R9
SYMATTR Value 40k
SYMBOL Acheron\\DTC123JKA 1600 160 R0
WINDOW 0 -18 -36 Top 2
WINDOW 3 -18 -51 Top 2
SYMATTR InstName U1
SYMATTR ModelFile C:\users\alvaro\My Documents\LTspiceXVII\lib\sym\Acheron\DTC123JKA.LIB
SYMBOL sw 1584 464 R0
SYMATTR InstName S3
SYMATTR Value IDEAL_SWITCH
SYMBOL voltage 1472 576 R180
WINDOW 0 9 104 Left 2
WINDOW 3 9 93 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value PULSE(0 1 1p 1n 1n 5s)
SYMBOL pjf 1280 0 R0
SYMATTR InstName J1
SYMATTR Value J270
SYMBOL res 2352 112 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value {R1}
SYMBOL res 2352 240 M180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value {R2}
SYMBOL cap 2336 144 M0
SYMATTR InstName C9
SYMATTR Value {C}
SYMBOL diode 2384 -64 M0
SYMATTR InstName D6
SYMATTR Value 1N4148
SYMBOL cap 2080 192 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C10
SYMATTR Value 1n
SYMBOL res 2160 96 M0
SYMATTR InstName R17
SYMATTR Value 40k
SYMBOL sw 2416 464 R0
SYMATTR InstName S4
SYMATTR Value IDEAL_SWITCH
SYMBOL voltage 2304 576 R180
WINDOW 0 9 104 Left 2
WINDOW 3 9 93 Left 0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value PULSE(0 1 1p 1n 1n 5s)
SYMBOL Acheron\\UMF5N 2112 288 R0
SYMATTR InstName U2
SYMATTR ModelFile C:\users\alvaro\My Documents\LTspiceXVII\lib\sym\Acheron\UMF5N.LIB
SYMBOL res 2256 272 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 1k
SYMBOL res 3024 -128 R0
SYMATTR InstName R16
SYMATTR Value {a+1u}
SYMBOL res 2176 112 R0
SYMATTR InstName R20
SYMATTR Value {a+1u}
TEXT 432 -480 Left 2 !.param R1=357k R1TOL=0.005
TEXT 432 -456 Left 2 !.param R2=1mega R2TOL=0.005
TEXT 432 -432 Left 2 !.param C=10u CTOL=0.05
TEXT 848 -432 Left 2 !.tran 0 8 5m 1m
TEXT 392 176 Left 2 !.meas TRAN fast_high_time WHEN {V(boot0_fast)=V(boot0_high_threshold)}
TEXT 392 200 Left 2 !.meas TRAN fast_low_time WHEN {V(boot0_fast)=V(boot0_low_threshold)}
TEXT 392 -56 Left 2 !.meas TRAN slow_high_time WHEN {V(boot0_slow)=V(boot0_high_threshold)}
TEXT 392 -32 Left 2 !.meas TRAN slow_low_time WHEN {V(boot0_slow)=V(boot0_low_threshold)}
TEXT 392 -264 Left 2 !.meas TRAN nominal_high_time WHEN {V(boot0_nominal)=V(boot0_high_threshold)}
TEXT 392 -240 Left 2 !.meas TRAN nominal_low_time WHEN {V(boot0_nominal)=V(boot0_low_threshold)}
TEXT 320 544 Left 2 !.meas TRAN nrst_high_time WHEN {V(nrst)=V(nrst_high_threshold)} RISE=1
TEXT 320 568 Left 2 !.meas TRAN nrst_low_time WHEN {V(nrst)=V(nrst_low_threshold)} RISE=1
TEXT 1120 312 Left 2 !.meas TRAN delayed_discharge_value_at_nrst_high FIND V(boot0_delayed_discharge) AT nrst_high_time
TEXT 1120 328 Left 2 !.meas TRAN delayed_discharge_high_cross_time WHEN {V(boot0_delayed_discharge)=V(boot0_high_threshold)} FALL=1
TEXT 392 -216 Left 2 !.meas TRAN nominal_low_falltime WHEN {V(boot0_nominal)=V(boot0_low_threshold)} FALL=1
TEXT 392 -192 Left 2 !.meas TRAN nominal_high_falltime WHEN {V(boot0_nominal)=V(boot0_high_threshold)} FALL=1
TEXT 1120 368 Left 2 ;.step param a 0 100k 10k
TEXT 1120 344 Left 2 !.meas TRAN delayed_discharge_low_cross_time WHEN {V(boot0_delayed_discharge)=V(boot0_low_threshold)} FALL=1
TEXT 2736 -488 Left 2 ;Circuit with dicharge using MUN5335DW1T1G
TEXT 816 -576 Left 2 ;Fixed voltages and thresholds
TEXT 1120 384 Left 2 !.param a 1k
TEXT 2752 664 Left 2 !.model IDEAL_SWITCH SW(RON = 1u, ROFF=1GG VT = 0.5, VH = 0.1, LSER = 0, VSER = 0)
TEXT -176 -496 Left 2 ;Circuits without discharge
TEXT 1072 -488 Left 2 ;Circuit with JFET discharge
TEXT 1904 -488 Left 2 ;Circuit with JFET discharge
LINE Normal 1568 -1216 800 -1216 2
LINE Normal 1568 -560 1568 -1216 2
LINE Normal 800 -560 1568 -560 2
LINE Normal 800 -1216 800 -560 2
LINE Normal 800 -1216 800 -1216 2
LINE Normal 800 -1216 800 -1216 2
LINE Normal -192 -336 -192 -336 2
LINE Normal 1008 -512 -192 -512 2
LINE Normal -192 688 -192 -512 2
LINE Normal 1008 688 1008 -512 2
LINE Normal 1008 688 -192 688 2
LINE Normal 1824 -512 1056 -512 2
LINE Normal 1056 688 1056 -512 2
LINE Normal 1824 688 1824 -512 2
LINE Normal 1824 688 1056 688 2
LINE Normal 2656 -512 1888 -512 2
LINE Normal 1888 688 1888 -512 2
LINE Normal 2656 688 2656 -512 2
LINE Normal 2656 688 1888 688 2
LINE Normal 3488 -512 2720 -512 2
LINE Normal 2720 688 2720 -512 2
LINE Normal 3488 688 3488 -512 2
LINE Normal 3488 688 2720 688 2
